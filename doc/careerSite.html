<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="stylesheet" href="//normalize-css.googlecode.com/svn/trunk/normalize.css" />


<!-- always required -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- needed for sequence diagrams -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/raphael-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/underscore-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/sequence-diagram-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/sequence-diagram-wrapper.js'></script>

<!-- needed for includes -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/clientInclude.js'></script>

<!-- needed for table of contents -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/tocify.js'></script>

<!-- always required -->
<link rel='stylesheet' href='http://talentappstore.github.io/tas-des-static/css/des.css' type='text/css' media='all' />


<title>Career site</title>
</head>
<body>

<div id="toc"></div>


<h1>Unresolved</h1>
<pre>


Session tracker
Source tracking - should all boards support source=X ?	
Should GET /jobs return
Entry with a job code

</pre>


<h1>Concepts</h1>

<h2>Boards</h2>

<p>An app can host one or more boards (careers sites), e.g. one for graduate recruitment, one for a specific country, etc.
</p>

<p>Each board might support:
<ul>
<li>browsing and searching for jobs 
<li>viewing details for a specific job
<li>displaying buttons for other apps against a job, e.g. apply, share, refer, etc.
</ul>

<p>A tenant can designate any board as the "primary board", i.e. the main careers site.
</p>

<p>Other apps will typically target the primary board when they create links to the board itself or to specific jobs on the board, e.g.:
<ul>
<li>the main menu of the tenant's web site (i.e. the "careers" section)
<li>job alert emails
<li>job board postings
<li>social media shares
</ul>
</p>		


<h1>Produce APIs
</h1>

<h2>GET /jobBoards/forApp
</h2>

<p>The APIs have the concept of a primary board. This is the board that other apps, such as a job emailer, would
generate links to.
</p>

<p>If your app produces any board that may (even in the future) be marked as the primary board, then your
app needs to declare those boards to other apps by producing (as non-SoT):
 
<div class='codeBlock'>
GET /jobBoards/forApp

Response:
<div class='clientInclude' data-href='../examples/jobBoards-simple.json'></div>
</div>
</p>


<h1>UI
</h1>

<h2>Header/common area</h2>

<p>Most boards have some kind of header or common area at the top of the page where the candidate's login status etc. is displayed.
</p>

<p>Your board should inject HTML for the general buttons in this area, by consuming:

<div class='codeBlock'>
GET /buttons/candidate/general/me/anonymous 
</div>
<br />
</p>

<p>or if the candidate is logged in:

<div class='codeBlock'>
GET /buttons/candidate/general/me/me 
</div>
</p>


<h2>Job details page</h2>

<p>Your board likely serves a "job details page" where the candidate can read the job description and click to apply.
</p>

<p>Your board should serve these pages at {baseUri} + {jobUriTemplate}, i.e. as your board returns in GET /jobBoards/forApp. 
</p>

<h3>LoggedIn filter</h3>

<p>If your board supports login (a board that doesn't should only display publicly visible jobs), then this page
should sit behind a loggedIn filter (as per conventions.html).
</p>

<p>This way a candidate who was logged in at another app (e.g. UberApply) and then linked to here (e.g. by clicking "View job details"), will be asked
to log in, which should happen invisibly, and can then (for example) see internal details for the job if they are an internal.
</p> 

<h3>Fetch details for job</h3>

<p>Your board should parse the job's ID from the URL, then use it to consume:
<ul>
<li>GET /jobs/byID/{job}
<li>GET /jobs/byID/{job}/description
</ul>
</p>

<p>You should display an indicator to show if the job is internal only (to guide internals not to share it).
</p>

<p>Your board can render the job using the following logic to handle internal candidates:
<pre>
- if your board supports login
	- if the candidate is logged in
		- if the candidate is internal
			- if the job is visible internally
				- render the job, with its internal details
			- else
				- render "sorry, this job is not available to internal candidates" message
		- else (public job seeker)
			- if the job is visible externally
				- render the job, with its external details
			- else
				- render "sorry, this job is not visible to external candidates" message
	- else
		- if the job is visible externally
			- render job, with its external details
		- else if the job is visible internally
			- redirect to self with loggedIn param (they may be internal)
			- the loggedIn filter fires and forces login
		- else (not visible at all)
			- render "sorry, this job is no longer available" message
</pre>
</p>

<p>The job's description is in safe markdown and needs to be converted to HTML before display.
</p>

<p>Your board should also retrieve all of the job-related values (position description documents, etc.) and render (perhaps in a table):

<div class='codeBlock'>
GET /items/toCandidate/anonymous/jobs/{job}
</div>
</p>

<p>or if the candidate is logged in:

<div class='codeBlock'>
GET /items/toCandidate/me/jobs/{job}
</div>
</p>

<p>Your board should retrieve details of all of the job-related buttons (apply button, share button, etc.) and render them:

<div class='codeBlock'>
GET /buttons/toCandidate/anonymous/jobs/{job}
</div>
<br />
</p>

<p>or if the candidate is logged in:

<div class='codeBlock'>
GET /buttons/toCandidate/me/jobs/{job}
</div>
</p>


<h2>Job search UI</h2>

<p>Most boards will display a screen something like this to allow the user to search for jobs:

<div class='codeBlock'>
Location:  |_Balclutha_______|V]
Expertise: |_Sales roles_____|V]
Type:      |_Part-time_______|V]
Keywords:  [______]
[Search]
</div>
</p>

<p>To populate a search UI like this, your board can consume:
<ul>
<li>GET /categories
<li>GET /categories/{}/values for each category
</ul>
</p>

<h2>Job list/search results pages</h2>

<p>To search/fetch lists of jobs, your board consumes one of:
<ul>
<li>GET /jobs
<li>POST /jobs/searches
</ul>
</p>

<p>Normally your board should restrict for availableInternally or availableExternally depending on whether a candidate is logged in
and if so whether they are internal or not. This restriction could be done:
<ul>
<li>by passing "availableInternally = true" to the search
<li>by fetching all jobs then filtering out based on the value of availableInternally  
</ul>
</p>

<p>Obviously for security reasons it must not be done client-side.
</p>


<h3>Keyword search</h3>

TODO - add to spec for search	


<h3>Creating links for jobs</h3>

<p>Your board may display some kind of job search results page, where each result has job title and a
link to navigate to the details page for that job.
</p>

<p>If your board does not display job details itself, that link can be the link returned by POST /jobs/searches,
which always points to the primary board.
</p>

<p>Otherwise your board should build up the link to itself. To create the link your app substitutes the variables in
the template with values from the job itself. Possible variables are described in jobs.json, and include:
<ul>
<li>id - a number value
<li>safeTitle - the job's title in safe form, url-compliant form
<li>code - the job's code
</ul>
</p>

<p><b>TODO: add safeTitle to GET /jobs.</b>
</p>


<h1>TODO</h1>


* must attach tracker parameter when redirecting

* must perform tracker session fixation


Displaying jobs

	Passing tracker through to injected widgets above

	Displaying customer-specific job items (custom data)

Generating trackers for anonymous users

Shadow ATS pages - any ATS


Top-level information

	
	Pass the loggedIn parameter


where the candidate can see their saved jobs would be protected.
</p>



- eg for saved jobs, reliable internals detection

	Displaying logged in candidate's name
	

Handling internals
	- grabbing role from incoming SAML assertion
	- checking IP address
	- using login
	- restricting jobs





<script>
$(document).ready(function() {

	renderSequenceDiagrams();
	renderClientIncludes();
	renderTOC();
});
</script>


</body>
</html>