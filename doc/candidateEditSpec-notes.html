<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- always required -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- needed for sequence diagrams -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/raphael-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/underscore-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/sequence-diagram-min.js'></script>
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/sequence-diagram-wrapper.js'></script>

<!-- needed for includes -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/clientInclude.js'></script>

<!-- needed for table of contents -->
<script type="text/javascript" src='http://talentappstore.github.io/tas-des-static/js/tocify.js'></script>

<!-- always required -->
<link rel='stylesheet' href='http://talentappstore.github.io/tas-des-static/css/des.css' type='text/css' media='all' />


<title>Design notes on candidateEditSpec and candidateEdit</title>
</head>
<body>

<h1>candidateEditSpec</h1>

<div id="toc"></div>

<h1>message</h1>
The message contains a text message (possibly including links), and a message type, intended for showing to the candidate.
The message may be used, for example, to explain to the candidate why their desired profile was amended, or denied. For example:
<ul>
<li>"You cannot apply for this req from a mobile phone - please use a desktop"
<li>"As a resident of Russia, you cannot apply for our jobs due to your country's data sovereignty laws"
</ul>

<h1>amendedIntent</h1>

<p>A version of the intent passed in the call to GET /editSpecs, possibly modified to meet rules set by
the tenant. For example:
<ul>
<li>candidate applying for pilot reqs must also register their interest in pilot jobs
<li>candidates applying to some specific customer service req must first apply to the pipeline req
<li>candidates apply to any req must agree to receive email
<li>candidates cannot apply to call centre reqs unless they have already been starred as 3 or greater in the call centre talent pool
</ul>

<h1>inputModel</h1>

<p>The inputModel defines the data (e.g. resume, personal details, attached documents, data items)
that the candidate may or must provide in order to complete the edit, possibly also considering the device
they are using.
</p>

<h1>itemsRule</h1>

<p>The individual data items that the candidate must supply, either candidate-scoped or application-scoped, e.g.:
<ul>
<li>if the amended profile includes applying for a job based in Australia, candidate may be asked "what is your eligibility to work in Australia?"
<li>if the amended profile includes registering interest in financial advisor jobs in NZ, candidate might need to upload an industry certification.
<li>if the device is smartphone, then a reduced set of questions may be asked
<li>if the profile includes applying for a job, and the candidate is internal, they may be asked "have you checked with your manager?"
<li>if the profile includes applying for a job, and the candidate has already been pre-vetted (e.g. employee referral perhaps in-store)
then they may get a truncated application form
</ul>
</p>

<p>The itemsRule is an extension variant of <a href='http://json-schema.org/'>json schema</a>.
</p>


 
- the data items
- their format
- their validation rules
- their particular behaviours (e.g. a set of well known fields describing a file upload like (e.g. "medical certificates")
using an extension of json schema.

Json schema is fairly widely known, and provides:
- simple validation rules
- the ability to group simple types into higher level complex types (objects) (e.g. "personal details section", "previous employment section - permanent employees")
- table questions (via arrays)
- linking to remote schemas
and other more concepts that an itemsRule needs.

The extensions are:

<h2>propertyOrder</h2>

<p>Individual properties can have a propertyOrder property, which acts as per as per https://github.com/jdorn/json-editor#property-ordering.
This can be used to control their display order <b>within their enclosing object</b>, e.g.:
<div class='codeBlock'>
"firstName": {
   "type": "string",
   "propertyOrder": 1001
}
</div>
</p>

<h2>Special formats for type=object</h2>

<p>itemsRules can use a set of formats on properties of type "object". These formats are also sometimes further controlled
by an options property that provides hints as to behaviour. For example the tas-fileUpload format allows an option of "accept"
that describes the allowable file formats as a comma separated list of mime types.
</p>

<h3>tas-enumdetails</h3>

<p>Used to handle situations such as yes/no/details.
</p>

<h3>tas-fileupload</h3>

<p>Used for file uploads. Should be applied to an object that has data, fileName and via properties.</p>

<p>An option of "accept" can be used to describe the allowable file formats as a comma separated list of mime types.

<div class='codeBlock'>
{
    "coverLetter": {
        "type": "object",
        "format": "tas-fileUpload",
        "options": {
            "accept": "image/png,text/html"
        },
        "description": "Please upload a cover letter. The shorter the better",
        "properties": {
            "data": {
                "type": "string",
                "media": {
                    "binaryEncoding": "base64"
                }
            },
            "fileName": {
                "type": "string"
            },
            "via": {
                "type": "string"
            }
        }
    }
}</div>
</p>

<h1>candidateEdit</h1>

<h2>items</h2>

<p>(These items match up to the editSpec items in the previous section).</p> 

<h3>tas-enumdetails</h3>

<p>TBD</p>

<h3>tas-fileupload</h3>

<p>
<div class='codeBlock'>
{
    "coverLetter": {
       "data": "iu7g6xswqs6216Ug564fojho7if8dfi876GKJH..",
       "fileName": "coverletter.docx",
       "via": "dropbox.com"
}
</div>
</p>

<h2>resume</h2>

<p>If a resume element is passed then any existing resume will be replaced by the contents of the resume element. If null, the existing
resume will be removed.

<p>Producer must run file through OWASP security tests.
</p>

<p>
<div class='codeBlock'>
{
    "resume": {
       "data": "iu7g6xswqs6216Ug564fojho7if8dfi876GKJH..",
       "fileName": "mycv.docx",
       "via": "device"
}
</div>
</p>

<h2>Applications</h2>

<p>Producer should check that the jobs for any applications are active. No check is needed of
the "open to internal" rules on the js vs. the candidate's actual type. That sort of excess
validation gets in the way of sending special candidate direct links for them to apply (e.g.
after an opening has closed, or to allow a special external applicant through to an internal-only opening).
</p>



<script>
$(document).ready(function() {

	renderSequenceDiagrams();
	renderClientIncludes();
	renderTOC();
});
</script>


</body>
</html>