{
    "$schema": "http://json-schema.org/draft-04/schema",
    "description": "A question item for TAS",
    "definitions": {

        "tas-string": {
            "type": "object",
            "properties": {
                "minSize": {
                    "description": "Min number of characters",
                    "type": "integer"
                },
                "maxSize": {
                    "description": "Max number of characters",
                    "type": "integer"
                }
            }
        },

        "tas-singleLine": {
            "allOf": [{
                "$ref": "#/definitions/tas-string"
            }, {
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["singleLine"]
                    }
                },
                "title": "tas-string",
                "description": "A short, plain-text question item"
            }]
        },

        "tas-multiline": {
            "allOf": [{
                "$ref": "#/definitions/tas-string"
            }, {
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["multiline"]
                    }
                },
                "title": "tas-string",
                "description": "A longer, markdown-formatted question item"
            }]
        },

        "tas-number": {
            "description": "A number question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["number"]
                },
                "maximum": {
                    "description": "Max number size",
                    "type": "number"
                },
                "minimum": {
                    "description": "Min number size",
                    "type": "number"
                }
            }
        },

        "tas-bool": {
            "description": "A boolean question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["bool"]
                },
                "trueString": {
                    "description": "String that represents a true answer",
                    "type": "string"
                },
                "falseString": {
                    "description": "String that represents a false answer",
                    "type": "string"
                }
            }
        },

        "tas-image": {
            "description": "An image question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["image"]
                },
                "accept": {
                    "description": "Allowable file mime types",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "maxSize": {
                    "description": "Maximum size of the file in bytes",
                    "type": "integer"
                }
            }
        },

        "tas-document": {
            "description": "A document question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["document"]
                },
                "accept": {
                    "description": "Allowable file mime types",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "maxSize": {
                    "description": "Maximum size of the file in bytes",
                    "type": "integer"
                }
            }
        },

        "tas-audio": {
            "description": "An audio question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["audio"]
                },
                "maxLength": {
                    "description": "Max length of recording allowed (in minutes)",
                    "type": "number"
                },
                "accept": {
                    "description": "Allowable file mime types",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "maxSize": {
                    "description": "Maximum size of the file in bytes",
                    "type": "integer"
                }
            }
        },

        "tas-enumDetails": {
            "description": "An more-details question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["enumDetails"]
                },
                "options": {
                    "description": "Possible string choices for this item",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "displayText": {
                                "type": "string"
                            },
                            "hasMoreDetails": {
                                "type": "boolean"
                            },
                            "requiresMoreDetails": {
                                "type": "boolean"
                            },
                            "moreDetailsPrompt": {
                                "type": "string"
                            },
                            "maxLength": {
                                "type": "integer"
                            }
                        }
                    }
                },
                "minSelections": {
                    "description": "Minimum number of selections required",
                    "type": "integer"
                },
                "maxSelections": {
                    "description": "Maximum number of selections allowed",
                    "type": "integer"
                }
            }
        },

        "tas-enumQuestions": {
            "description": "An more-questions question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["enumQuestions"]
                },
                "options": {
                    "description": "Possible string choices for this item",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "option": {
                                "type": "object",
                                "properties": {
                                    "id": {
                                        "type": "string"
                                    },
                                    "displayText": {
                                        "type": "string"
                                    }
                                }
                            },
                            "hasMoreDetails": {
                                "type": "boolean"
                            },
                            "followupQuestions": {
                                "type": "array",
                                "items": {
                                    "$ref": "#"
                                }
                            }
                        }
                    }
                },
                "minSelections": {
                    "description": "Minimum number of selections required",
                    "type": "integer"
                },
                "maxSelections": {
                    "description": "Maximum number of selections allowed",
                    "type": "integer"
                }
            }
        },

        "tas-category": {
            "description": "An category question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["category"]
                },
                "options": {
                    "$ref": "categoryValues.json"
                },
                "rules": {
                    "$ref": "category.json#/definitions/rules"
                }
            }
        },

        "tas-sheet": {
            "description": "Rows of question items",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["sheet"]
                },
                "columns": {
                    "description": "List of columns",
                    "type": "array",
                    "items": {
                        "$ref": "#"
                    }
                }
            }
        },

        "tas-wysiwyg": {
            "allOf": [{
                "$ref": "#/definitions/tas-string"
            }, {
                "description": "A freeform text question item",
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["wysiwyg"]
                    }
                }
            }]
        },

        "tas-chrono": {
            "properties": {
                "oldestDateAllowed": {
                    "description": "Oldest date that can be selected",
                    "type": "string"
                },
                "newestDateAllowed": {
                    "description": "Newest date that can be selected",
                    "type": "string"
                }
            }
        },

        "tas-date": {
            "description": "A date item YYYY-MM-DD",
            "allOf": [{
                "$ref": "#/definitions/tas-chrono"
            }, {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["date"]
                    }
                }
            }]
        },

        "tas-time": {
            "description": "A time item HH:MM:SS-HH:MM",
            "allOf": [{
                "$ref": "#/definitions/tas-chrono"
            }, {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["time"]
                    }
                }
            }]
        },

        "tas-datetime": {
            "description": "A date item YYYY-MM-DDTHH:MM:SS-HH:MM",
            "allOf": [{
                "$ref": "#/definitions/tas-chrono"
            }, {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["datetime"]
                    }
                }
            }]
        },

        "tas-salary": {
            "description": "A salary question item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["salary"]
                },
                "payBands": {
                    "description": "List of options if freeform input not allowed",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "maximumDigitals": {
                    "description": "Max number characters",
                    "type": "integer"
                }
            }
        },

        "tas-info": {
            "description": "An info item to be displayed to the user",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["info"]
                },
                "name": {
                    "description": "Name to be used to ID heading",
                    "type": "string"
                },
                "text": {
                    "description": "Text for info",
                    "type": "string"
                }
            }
        },

        "tas-heading": {
            "description": "A heading item",
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["heading"]
                },
                "name": {
                    "description": "Name to be used to ID heading",
                    "type": "string"
                },
                "text": {
                    "description": "Text for heading",
                    "type": "string"
                },
                "level": {
                    "description": "Recommended heading size",
                    "type": "integer"
                }
            }
        }

    },
    "allOf": [{
        "oneOf": [{
            "$ref": "#/definitions/tas-singleLine"
        }, {
            "$ref": "#/definitions/tas-multiline"
        }, {
            "$ref": "#/definitions/tas-number"
        }, {
            "$ref": "#/definitions/tas-bool"
        }, {
            "$ref": "#/definitions/tas-image"
        }, {
            "$ref": "#/definitions/tas-document"
        }, {
            "$ref": "#/definitions/tas-audio"
        }, {
            "$ref": "#/definitions/tas-enumDetails"
        }, {
            "$ref": "#/definitions/tas-category"
        }, {
            "$ref": "#/definitions/tas-sheet"
        }, {
            "$ref": "#/definitions/tas-wysiwyg"
        }, {
            "$ref": "#/definitions/tas-date"
        }, {
            "$ref": "#/definitions/tas-time"
        }, {
            "$ref": "#/definitions/tas-datetime"
        }, {
            "$ref": "#/definitions/tas-salary"
        }, {
            "$ref": "#/definitions/tas-info"
        }, {
            "$ref": "#/definitions/tas-heading"
        }]
    }, {
        "properties": {
            "type": {
                "description": "TAS item type",
                "type": "string"
            },
            "name": {
                "description": "The unique ID of the question",
                "type": "string"
            },
            "question": {
                "description": "Question text",
                "type": "string"
            },
            "prompt": {
                "description": "Additional helper text",
                "type": "string"
            },
            "isRequired": {
                "description": "If an answer is required",
                "type": "boolean"
            },
            "isReadOnly": {
                "description": "Answer cannot be edited",
                "type": "boolean"
            },
            "access": {
                "description": "Accessibility for this item",
                "enum": ["candidateOwned", "internalOwned", "internalShared", "eeo"]
            },
            "propertyOrder": {
                "description": "Hint for display order",
                "type": "integer"
            }
        },
        "required": ["name", "type", "question"]
    }]
}
